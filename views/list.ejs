<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>panorama</title>
<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="css/hint.css">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/list.css">

<script src="js/reqwest.min.js" type="text/javascript"></script>
<script src="js/knockout.min.js" type="text/javascript"></script>
<script src="js/underscore.min.js" type="text/javascript"></script>
<script src="js/moment.min.js" type="text/javascript"></script>
<script src="js/panorama.js" type="text/javascript"></script>
<script>
	var panorama = new Panorama(<%- JSON.stringify(user.organizations) %>);
	window.onload = function () {
		panorama.init('list');
	};
</script>
</head>
<body>
<div class="container">

	<% include include/header %>

	<p class="loading" data-bind="visible: loading">loading...</p>
	<div id="body">
		<div id="content" style="display: none;" data-bind="visible: true">
			<nav data-bind="visible: filter">
				<button data-bind="click: setFilter">Clear filter</button>
			</nav>
			<ul class="pushes" data-bind="foreach: filteredPushes">
				<li class="push">
					<time class="push-time" data-bind="text: $root.getPushTime($data)"></time>
					<div class="push-user-container">
						<img class="push-user filter-user" data-bind="attr: { src: user.image, alt: user.login, title: user.login }, click: $root.setFilter.bind($root)">
					</div>
					<div class="push-commits">
						<div class="push-commits-intro">
							<a target="_blank" data-bind="attr: { href: $root.getGithubCompareLink($data) }"><span data-bind="text: size + (size === 1 ? ' commit' : ' commits')"></span></a>
							to <a class="repo-tag filter-repo" data-bind="text: $root.getRepository(repo).simpleName, click: $root.setFilter.bind($root), style: { 'backgroundColor': $root.getRepository(repo).color }"></a> <!-- ko if: branch !== 'master' -->(<span data-bind="text: branch"></span>)<!-- /ko -->
						</div>
						<p class="push-commits-messages" data-bind="text: $root.getPushCommits($data)"></p>
					</div>
				</li>
			</ul>
		</div>
	</div>

</div>
</body>
</html>
